{{define "projects-content"}}
<section class="section relative">
    <div class="container">
        <!-- Page Header -->
        <div class="section-header relative">
            <!-- xiaoOS Status Bar -->
            <div class="absolute top-0 right-0">
                <div class="nexus-status-bar">
                    DATABASE_ACCESS: AUTHORIZED | CLEARANCE_LEVEL: 3
                </div>
            </div>
            
            <div class="nexus-header" style="margin-bottom: 32px;">PROJECT DATABASE</div>
            <h1 class="section-title" data-text="DEVELOPMENT ARCHIVE">
                DEVELOPMENT <span class="highlight">ARCHIVE</span>
            </h1>
            <p class="section-description">
                Classified development records and project documentation
            </p>
        </div>

        <!-- Database Stats -->
        <div class="status-grid" style="margin-bottom: 64px;">
            <div class="status-item">
                <div class="data-stat text-cyan-400">{{len .Projects}}</div>
                <div class="data-stat-label">Total Projects</div>
            </div>
            
            <div class="status-item">
                <div class="data-stat text-orange-500">6</div>
                <div class="data-stat-label">Technologies</div>
            </div>
            
            <div class="status-item">
                <div class="data-stat text-green-400">100%</div>
                <div class="data-stat-label">Success Rate</div>
            </div>
            
            <div class="status-item">
                <div class="data-stat status-text">2024</div>
                <div class="data-stat-label">Latest Build</div>
            </div>
        </div>

        <!-- Filter Controls -->
        <div class="nexus-panel" style="margin-bottom: 48px;">
            <div class="panel-header">FILTER CONTROLS</div>
            
            <!-- Primary Filters -->
            <div class="nexus-actions" style="margin-top: 16px; justify-content: center; flex-wrap: wrap; gap: 8px;">
                <button class="nexus-btn nexus-btn-secondary filter-btn active" data-filter="all">ALL PROJECTS</button>
                <button class="nexus-btn nexus-btn-secondary filter-btn" data-filter="web">WEB DEVELOPMENT</button>
                <button class="nexus-btn nexus-btn-secondary filter-btn" data-filter="academic">ACADEMIC</button>
                <button class="nexus-btn nexus-btn-secondary filter-btn" data-filter="security">SECURITY</button>
                <button class="nexus-btn nexus-btn-secondary filter-btn" data-filter="research">RESEARCH</button>
                <button class="nexus-btn nexus-btn-secondary filter-btn" data-filter="tool">TOOLS</button>
            </div>
            
            <!-- Status Filters -->
            <div class="nexus-actions" style="margin-top: 12px; justify-content: center; flex-wrap: wrap; gap: 8px;">
                <button class="nexus-btn nexus-btn-tertiary status-filter-btn active" data-status="all">ALL STATUS</button>
                <button class="nexus-btn nexus-btn-tertiary status-filter-btn" data-status="active">ACTIVE</button>
                <button class="nexus-btn nexus-btn-tertiary status-filter-btn" data-status="in-development">IN DEVELOPMENT</button>
                <button class="nexus-btn nexus-btn-tertiary status-filter-btn" data-status="archived">ARCHIVED</button>
            </div>
            
            <!-- Demo Type Filters -->
            <div class="nexus-actions" style="margin-top: 12px; justify-content: center; flex-wrap: wrap; gap: 8px;">
                <button class="nexus-btn nexus-btn-tertiary demo-filter-btn active" data-demo="all">ALL DEMOS</button>
                <button class="nexus-btn nexus-btn-tertiary demo-filter-btn" data-demo="live">LIVE DEMOS</button>
                <button class="nexus-btn nexus-btn-tertiary demo-filter-btn" data-demo="hosted">HOSTED DEMOS</button>
                <button class="nexus-btn nexus-btn-tertiary demo-filter-btn" data-demo="video">VIDEO DEMOS</button>
                <button class="nexus-btn nexus-btn-tertiary demo-filter-btn" data-demo="screenshot">SCREENSHOTS</button>
            </div>
        </div>

        <!-- Terminal Output -->
        <div class="nexus-terminal" style="margin-bottom: 48px;">
            <div class="terminal-line">
                <span class="terminal-prompt">root@xiaoos:~$</span> query_project_database --status=active
            </div>
            <div class="terminal-line">
                Scanning project archives<span class="terminal-pulse">...</span>
            </div>
            <div class="terminal-line">
                <span class="terminal-success">✓</span> Found {{len .Projects}} active projects
            </div>
            <div class="terminal-line">
                <span class="terminal-success">✓</span> Security clearance verified
            </div>
            <div class="terminal-line">
                <span class="terminal-highlight">></span> Displaying results <span class="terminal-pulse">█</span>
            </div>
        </div>

        <!-- Projects Grid -->
        <div class="projects-container">
            <div class="projects-grid">
                {{range .Projects}}
                <div class="project-card" data-category="{{.ID}}" data-type="{{.Type}}" data-status="{{.Status}}" data-demo="{{.DemoType}}">
                <div class="nexus-header">PROJECT {{.ID}}</div>
                <div class="project-content">
                    <!-- Project Visual -->
                    <div class="project-visual">
                        {{if .Image}}
                        <img src="{{.Image}}" alt="{{.Title}}" style="width: 100%; height: 100%; object-fit: cover;" onerror="this.src='/static/images/wip-default.svg'; this.onerror=null;">
                        {{else}}
                        <img src="/static/images/wip-default.svg" alt="Work In Progress" style="width: 100%; height: 100%; object-fit: cover;">
                        {{end}}
                    </div>
                    
                    <!-- Project Info -->
                    <div class="project-title" data-text="{{.Title}}">{{.Title}}</div>
                    <div class="project-description">{{.Description}}</div>
                    
                    <!-- Tech Stack -->
                    <div class="tech-stack">
                        <div class="tech-label">TECHNOLOGIES</div>
                        <div class="tech-tags">
                            {{range .Technologies}}
                            <span class="tech-tag">{{.}}</span>
                            {{end}}
                        </div>
                    </div>
                    
                    <!-- Project Links -->
                    <div class="project-links">
                        {{if .GitHubURL}}
                        <a href="{{.GitHubURL}}" target="_blank" rel="noopener noreferrer" class="project-link">
                            SOURCE CODE
                        </a>
                        {{end}}
                        {{if eq .DemoType "live"}}
                        <a href="{{.LiveURL}}" target="_blank" rel="noopener noreferrer" class="project-link demo live-demo">
                            LIVE DEMO
                        </a>
                        {{else if eq .DemoType "hosted"}}
                        <a href="{{.DemoURL}}" target="_blank" rel="noopener noreferrer" class="project-link demo hosted-demo">
                            PLAY DEMO
                        </a>
                        {{else if eq .DemoType "video"}}
                        <a href="{{.DemoURL}}" target="_blank" rel="noopener noreferrer" class="project-link demo video-demo" data-demo-type="video">
                            WATCH DEMO
                        </a>
                        {{else if eq .DemoType "screenshot"}}
                        <a href="{{.DemoURL}}" target="_blank" rel="noopener noreferrer" class="project-link demo screenshot-demo" data-demo-type="screenshot">
                            VIEW DEMO
                        </a>
                        {{end}}
                    </div>
                    
                    <!-- Project Status -->
                    <div style="margin-top: 16px; padding-top: 16px; border-top: 1px solid #333333; display: flex; justify-content: space-between; align-items: center;">
                        <div style="font-size: 12px;">
                            <span class="status-text">STATUS:</span>
                            {{if eq .Status "active"}}
                            <span class="status-online">ACTIVE</span>
                            {{else if eq .Status "in-development"}}
                            <span class="status-warning">IN DEVELOPMENT</span>
                            {{else if eq .Status "archived"}}
                            <span class="status-offline">ARCHIVED</span>
                            {{else}}
                            <span class="status-online">DEPLOYED</span>
                            {{end}}
                        </div>
                        <div style="font-size: 12px; color: #cccccc;">
                            {{.Date.Format "2006-01-02"}}
                        </div>
                    </div>
                </div>
            </div>
            {{end}}
            </div>
        </div>

        <!-- Database Footer -->
        <div style="text-align: center; margin-top: 64px; padding: 32px; border-top: 1px solid #333333;">
            <div style="color: #cccccc; font-size: 14px; margin-bottom: 8px;">
                PROJECT DATABASE ACCESS LOG
            </div>
            <div style="color: #666666; font-size: 12px;">
                Last Updated: {{.Year}}-09-12 | Access Level: <span class="status-online">AUTHORIZED</span>
            </div>
        </div>
    </div>
</section>

<script>
// Enhanced Project Filter Functionality
document.addEventListener('DOMContentLoaded', function() {
    const filterButtons = document.querySelectorAll('.filter-btn');
    const statusButtons = document.querySelectorAll('.status-filter-btn');
    const demoButtons = document.querySelectorAll('.demo-filter-btn');
    const projectCards = document.querySelectorAll('.project-card');
    
    let currentFilters = {
        type: 'all',
        status: 'all',
        demo: 'all'
    };
    
    function updateActiveButtons(category, value) {
        const buttons = document.querySelectorAll(`.${category}-filter-btn`);
        buttons.forEach(btn => btn.classList.remove('active'));
        const activeBtn = document.querySelector(`[data-${category}="${value}"]`);
        if (activeBtn) activeBtn.classList.add('active');
    }
    
    function filterProjects() {
        projectCards.forEach(card => {
            const cardType = card.getAttribute('data-type');
            const cardStatus = card.getAttribute('data-status');
            const cardDemo = card.getAttribute('data-demo');
            
            let showCard = true;
            
            // Type filter
            if (currentFilters.type !== 'all' && cardType !== currentFilters.type) {
                showCard = false;
            }
            
            // Status filter
            if (currentFilters.status !== 'all' && cardStatus !== currentFilters.status) {
                showCard = false;
            }
            
            // Demo filter
            if (currentFilters.demo !== 'all' && cardDemo !== currentFilters.demo) {
                showCard = false;
            }
            
            card.style.display = showCard ? 'block' : 'none';
        });
        
        // Update project count display
        const visibleProjects = document.querySelectorAll('.project-card[style*="block"], .project-card:not([style*="none"])');
        const projectCount = Array.from(visibleProjects).filter(card => 
            card.style.display !== 'none'
        ).length;
        
        // Update the terminal output to show filtered count
        const terminalLine = document.querySelector('.terminal-line:last-child');
        if (terminalLine) {
            terminalLine.innerHTML = `<span class="terminal-success">✓</span> Found ${projectCount} projects matching filters`;
        }
    }
    
    // Type filter buttons
    filterButtons.forEach(button => {
        button.addEventListener('click', function() {
            currentFilters.type = this.getAttribute('data-filter');
            updateActiveButtons('type', currentFilters.type);
            filterProjects();
        });
    });
    
    // Status filter buttons
    statusButtons.forEach(button => {
        button.addEventListener('click', function() {
            currentFilters.status = this.getAttribute('data-status');
            updateActiveButtons('status', currentFilters.status);
            filterProjects();
        });
    });
    
    // Demo filter buttons
    demoButtons.forEach(button => {
        button.addEventListener('click', function() {
            currentFilters.demo = this.getAttribute('data-demo');
            updateActiveButtons('demo', currentFilters.demo);
            filterProjects();
        });
    });
    
    // Initialize with all projects visible
    filterProjects();
});
</script>
{{end}}